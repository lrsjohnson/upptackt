\chapter{Code Listings}
\label{chap:code}

This appendix contains full code listings for the system, implemented
using MIT/GNU Scheme 9.2. In addition to the code provided here, the
system is dependent on the propagator system used in Alexey Radul and
Gerald Jay Sussman's \emph{Revised Report on the Propagator Model}
available at
\url{http://groups.csail.mit.edu/mac/users/gjs/propagators/}.

The three files in \texttt{lib/} are code used with permission from
external sources, and include excerpts of code created by Gerald
Sussman and others from the MIT Scheme Mechanics Library
\cite{scmutils}. These excerpts handle numeric accuracy, generic
operations, and hash-table based eq-properties. All other code in
these listings is written solely by me for use in this thesis.

\section*{List of Listings}
\lolnoheading

\lstdefinestyle{includes}{
  numbers=left,
  xleftmargin=0.3in,
  basicstyle=\fontsize{8pt}{9pt}\ttfamily,
}

\newcommand{\includecode}[2][c]{\lstinputlisting[caption=~#2, style=includes]{code/#2}}
% ...
\newpage
\linespread{1}

% Reset them at the end of this chapter!
\addtolength{\oddsidemargin}{-.4in}
\addtolength{\evensidemargin}{-.4in}
\addtolength{\textwidth}{0.8in}

\begin{landscape}
\begin{multicols}{2}
\includecode{load.scm}

%\includecode{learning/walkthrough.scm}

\addtocontents{lol}{{\bf Imperative Construction System:}}
\includecode{figure/core.scm}
\includecode{figure/linear.scm}
\includecode{figure/direction.scm}
\includecode{figure/vec.scm}
\includecode{figure/measurements.scm}
\includecode{figure/angle.scm}
\includecode{figure/bounds.scm}
\includecode{figure/circle.scm}
\includecode{figure/point.scm}
\includecode{figure/constructions.scm}
\includecode{figure/intersections.scm}
\includecode{figure/figure.scm}
\includecode{figure/math-utils.scm}
\includecode{figure/polygon.scm}
\includecode{figure/metadata.scm}
\includecode{figure/dependencies.scm}
\includecode{figure/randomness.scm}
\includecode{figure/transforms.scm}
\includecode{figure/direction-interval.scm}

\addtocontents{lol}{{\bf Perception Module:}}
\includecode{perception/relationship.scm}
\includecode{perception/observation.scm}
\includecode{perception/analyzer.scm}

\addtocontents{lol}{{\bf Graphics Utilities:}}
\includecode{graphics/appearance.scm}
\includecode{graphics/graphics.scm}

\addtocontents{lol}{{\bf Declarative Constraint Solver:}}
\includecode{solver/linkages.scm}
\includecode{solver/region.scm}
\includecode{solver/constraints.scm}
\includecode{solver/topology.scm}
\includecode{solver/mechanism.scm}
\includecode{solver/main.scm}

\addtocontents{lol}{{\bf Learning Module:}}
\includecode{learning/interface.scm}
\includecode{learning/lattice.scm}
\includecode{learning/definitions.scm}
\includecode{learning/conjecture.scm}
\includecode{learning/simplifier.scm}
\includecode{learning/student.scm}
\includecode{learning/core-knowledge.scm}
\includecode{learning/investigation.scm}

\addtocontents{lol}{{\bf Example Content:}}
\includecode{content/random-polygons.scm}
\includecode{content/thesis-demos.scm}
\includecode{content/walkthrough.scm}
\includecode{content/investigations.scm}

\addtocontents{lol}{{\bf Core Components and Utilities:}}
\includecode{core/animation.scm}
\includecode{core/macros.scm}
\includecode{core/print.scm}
\includecode{core/utils.scm}

\addtocontents{lol}{{\bf External Library Procedures:}}
\includecode{lib/close-enuf.scm}
\includecode{lib/eq-properties.scm}
\includecode{lib/ghelper.scm}
% ...
\end{multicols}
\end{landscape}



% Reset Margins
\addtolength{\oddsidemargin}{.4in}
\addtolength{\evensidemargin}{.4in}
\addtolength{\textwidth}{-0.8in}

\clearpage
\newpage
